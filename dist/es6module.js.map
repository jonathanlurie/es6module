{"version":3,"file":"es6module.js","sources":["../node_modules/rollup-plugin-webworkify/lib/workerhelper.js","../src/Bar.worker.js","../src/Foo.js","../src/index.js"],"sourcesContent":["/*! rollup-plugin-webworkify/workerhelper.js v0.0.4 | MIT Licensed | Allex Wang <allex.wxn@gmail.com> */\nvar win = window, BlobBuilder = win.BlobBuilder || win.WebKitBlobBuilder || win.MozBlobBuilder || win.MSBlobBuilder, URL = win.URL || win.webkitURL || win.mozURL || win.msURL, SCRIPT_TYPE = \"application/javascript\", TARGET = \"undefined\" == typeof Symbol ? \"__t\" + +new Date() : Symbol(), Worker = win.Worker, nextTick = win.setImmediate || function(e) {\n  return setTimeout(e, 1);\n};\n\nfunction workerCtor(e, t) {\n  return function r(n) {\n    var o = this;\n    if (!(o instanceof r)) return new r(n);\n    if (!t) return new Worker(e);\n    if (Worker && !n) {\n      var i = createSourceObject(';(function(f){f&&new(f.default?f[\"default\"]:f)(self)}((' + t.toString() + \")()))\"), a = new Worker(i);\n      return URL.revokeObjectURL(i), o[TARGET] = a;\n    }\n    var c = new WorkerEmitter({\n      close: function() {\n        this.destroy();\n      }\n    }, o);\n    Object.assign(new WorkerEmitter(o, c), {\n      isThisThread: !0,\n      terminate: function() {\n        c.close(), this.destroy();\n      }\n    }), t().call(c, c);\n  };\n}\n\nfunction WorkerEmitter(e, t) {\n  var r = Object.create(null);\n  return e.onmessage = null, e.addEventListener = function(e, t) {\n    var n = r[e] || (r[e] = []);\n    ~n.indexOf(t) || n.push(t);\n  }, e.removeEventListener = function(e, t) {\n    var n, o = r[e];\n    o && -1 !== (n = o.indexOf(t)) && (o.splice(n, 1), o.length || delete r[e]);\n  }, e.postMessage = function(r) {\n    nextTick(function() {\n      var n = r;\n      if (t.onmessage) try {\n        t.onmessage({\n          data: n,\n          target: e\n        });\n      } catch (e) {\n        console.error(e);\n      }\n      t.emit(\"message\", {\n        type: \"message\",\n        data: n,\n        target: e,\n        timeStamp: +new Date()\n      });\n    });\n  }, e.emit = function(t, n) {\n    var o = r[t];\n    o && o.forEach(function(t, r) {\n      return t.call(e, n);\n    });\n  }, e.destroy = function() {\n    Object.keys(r).forEach(function(e) {\n      var t = r[e];\n      t && (t.length = 0, delete r[e]);\n    }), r = null;\n  }, e;\n}\n\nif (Worker) {\n  var testWorker, objURL = createSourceObject(\"self.onmessage = function () {}\"), testArray = new Uint8Array(1);\n  try {\n    if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) throw new Error(\"Not available\");\n    (testWorker = new Worker(objURL)).postMessage(testArray, [ testArray.buffer ]);\n  } catch (e) {\n    Worker = null;\n  } finally {\n    URL.revokeObjectURL(objURL), testWorker && testWorker.terminate();\n  }\n}\n\nfunction createSourceObject(e) {\n  var t = SCRIPT_TYPE;\n  try {\n    return URL.createObjectURL(new Blob([ e ], {\n      type: t\n    }));\n  } catch (n) {\n    var r = new BlobBuilder();\n    return r.append(e), URL.createObjectURL(r.getBlob(t));\n  }\n}\n\nexport { workerCtor };\n","\nimport * as webworkify from '\u0000webworkifyHelpers'\nexport default webworkify.workerCtor('worker#./Bar.worker.js', function() { return (function(e,r){return e(r={exports:{}},r.exports),r.exports})(function (module, exports) {\n  /**\n * In this webworker, we send a message to the main thread every half second,\n */\n\n// the worker code lies in the export instruction\nfunction Bar(self) {\n  \n  setInterval(function () {\n    self.postMessage('A message sent by the worker on a regular interval')\n  }, 500)\n\n  self.addEventListener('message',function (e) {\n    console.log(e.data)\n    self.postMessage('PONG from worker')\n  })\n}\n\nmodule.exports = Bar\n\n});})\n","import BarWorker from 'worker#./Bar.worker.js'\n\n/**\n * This class is for Foo\n */\nclass Foo {\n  /**\n   * Creates a foo.\n   * @param {number} anAttribute - a value.\n   * @param {number} aSecondAttribute - another value.\n   */\n  constructor(anAttribute, aSecondAttribute = 10) {\n    this.anAttribute = anAttribute\n    this.aSecondAttribute = aSecondAttribute\n    console.log('a foo is constructed')\n\n\n    let barWorker = new BarWorker()\n    barWorker.addEventListener('message', function (e) {\n      console.log(e.data)\n    })\n    barWorker.postMessage(\"PING from the main thread\")\n  }\n\n  /**\n   * Set anAttribute.\n   * @param {number} a - the value to give to anAttribute.\n   */\n  setAnAttribute(a) {\n    this.anAttribute = a\n    console.log('calling setAnAttribute()')\n  }\n\n  /**\n   * Display anAttribute.\n   */\n  printAnAttribute() {\n    console.log(this.anAttribute)\n  }\n\n  /**\n  * @return {number} The anAttribute value.\n  */\n  getAnAttribute() {\n    return this.anAttribute\n  }\n}\n\nexport default Foo\n","import Foo from './Foo'\n\nexport default ({\n  Foo,\n})\n"],"names":["webworkify.workerCtor"],"mappings":"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"}
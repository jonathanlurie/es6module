{"version":3,"file":"es6module.js","sources":["../node_modules/rollup-plugin-webworkify/lib/workerhelper.js","../src/Bar.worker.js","../src/Foo.js","../src/index.js"],"sourcesContent":["/*! rollup-plugin-webworkify/workerhelper.js v0.0.4 | MIT Licensed | Allex Wang <allex.wxn@gmail.com> */\nvar win = window, BlobBuilder = win.BlobBuilder || win.WebKitBlobBuilder || win.MozBlobBuilder || win.MSBlobBuilder, URL = win.URL || win.webkitURL || win.mozURL || win.msURL, SCRIPT_TYPE = \"application/javascript\", TARGET = \"undefined\" == typeof Symbol ? \"__t\" + +new Date() : Symbol(), Worker = win.Worker, nextTick = win.setImmediate || function(e) {\n  return setTimeout(e, 1);\n};\n\nfunction workerCtor(e, t) {\n  return function r(n) {\n    var o = this;\n    if (!(o instanceof r)) return new r(n);\n    if (!t) return new Worker(e);\n    if (Worker && !n) {\n      var i = createSourceObject(';(function(f){f&&new(f.default?f[\"default\"]:f)(self)}((' + t.toString() + \")()))\"), a = new Worker(i);\n      return URL.revokeObjectURL(i), o[TARGET] = a;\n    }\n    var c = new WorkerEmitter({\n      close: function() {\n        this.destroy();\n      }\n    }, o);\n    Object.assign(new WorkerEmitter(o, c), {\n      isThisThread: !0,\n      terminate: function() {\n        c.close(), this.destroy();\n      }\n    }), t().call(c, c);\n  };\n}\n\nfunction WorkerEmitter(e, t) {\n  var r = Object.create(null);\n  return e.onmessage = null, e.addEventListener = function(e, t) {\n    var n = r[e] || (r[e] = []);\n    ~n.indexOf(t) || n.push(t);\n  }, e.removeEventListener = function(e, t) {\n    var n, o = r[e];\n    o && -1 !== (n = o.indexOf(t)) && (o.splice(n, 1), o.length || delete r[e]);\n  }, e.postMessage = function(r) {\n    nextTick(function() {\n      var n = r;\n      if (t.onmessage) try {\n        t.onmessage({\n          data: n,\n          target: e\n        });\n      } catch (e) {\n        console.error(e);\n      }\n      t.emit(\"message\", {\n        type: \"message\",\n        data: n,\n        target: e,\n        timeStamp: +new Date()\n      });\n    });\n  }, e.emit = function(t, n) {\n    var o = r[t];\n    o && o.forEach(function(t, r) {\n      return t.call(e, n);\n    });\n  }, e.destroy = function() {\n    Object.keys(r).forEach(function(e) {\n      var t = r[e];\n      t && (t.length = 0, delete r[e]);\n    }), r = null;\n  }, e;\n}\n\nif (Worker) {\n  var testWorker, objURL = createSourceObject(\"self.onmessage = function () {}\"), testArray = new Uint8Array(1);\n  try {\n    if (/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent)) throw new Error(\"Not available\");\n    (testWorker = new Worker(objURL)).postMessage(testArray, [ testArray.buffer ]);\n  } catch (e) {\n    Worker = null;\n  } finally {\n    URL.revokeObjectURL(objURL), testWorker && testWorker.terminate();\n  }\n}\n\nfunction createSourceObject(e) {\n  var t = SCRIPT_TYPE;\n  try {\n    return URL.createObjectURL(new Blob([ e ], {\n      type: t\n    }));\n  } catch (n) {\n    var r = new BlobBuilder();\n    return r.append(e), URL.createObjectURL(r.getBlob(t));\n  }\n}\n\nexport { workerCtor };\n","\nimport * as webworkify from '\u0000webworkifyHelpers'\nexport default webworkify.workerCtor('worker#./Bar.worker.js', function() { return (function(e,r){return e(r={exports:{}},r.exports),r.exports})(function (module, exports) {\n  /**\n * In this webworker, we send a message to the main thread every half second\n */\n\n// the worker code lies in the export instruction\nfunction Bar(self) {\n\n  setInterval(function () {\n    self.postMessage('A message sent by the worker on a regular interval')\n  }, 500)\n\n  self.addEventListener('message',function (e) {\n    console.log(e.data)\n    self.postMessage('PONG from worker')\n  })\n}\n\nmodule.exports = Bar\n\n});})\n","import BarWorker from 'worker#./Bar.worker.js'\n\n/**\n * This class is for Foo\n */\nclass Foo {\n  /**\n   * Creates a foo.\n   * @param {number} anAttribute - a value.\n   * @param {number} aSecondAttribute - another value.\n   */\n  constructor(anAttribute, aSecondAttribute = 10) {\n    this.anAttribute = anAttribute\n    this.aSecondAttribute = aSecondAttribute\n    console.log('a foo is constructed')\n  }\n\n\n  /**\n   * Set anAttribute.\n   * @param {number} a - the value to give to anAttribute.\n   */\n  setAnAttribute(a) {\n    this.anAttribute = a\n    console.log('calling setAnAttribute()')\n  }\n\n  /**\n   * Display anAttribute.\n   */\n  printAnAttribute() {\n    console.log(this.anAttribute)\n  }\n\n  /**\n  * @return {number} The anAttribute value.\n  */\n  getAnAttribute() {\n    return this.anAttribute\n  }\n\n\n  /**\n   * This calls a pretty classic web worker, from a file in the folder 'example'.\n   * Inside this worker, we import a script from yet another file.\n   */\n  testWorker01() {\n    let myFooWorker = new Worker(\"workers/Foo.worker.js\")\n\n    myFooWorker.postMessage('PING from the main thread')\n\n    myFooWorker.onmessage = function(e) {\n      console.log(e.data)\n    }\n  }\n\n\n  /**\n   * Here we create a worker that is encapsulated in the final bundle. In some case,\n   * it can be more convenient but the limitation is that we cannot import scripts\n   * from this worker, which is very limiting\n   */\n  testWorker02() {\n    let barWorker = new BarWorker()\n    barWorker.addEventListener('message', function (e) {\n      console.log(e.data)\n    })\n    barWorker.postMessage(\"PING from the main thread\")\n  }\n}\n\nexport default Foo\n","import Foo from './Foo'\n\nexport default ({\n  Foo,\n})\n"],"names":["Worker","webworkify.workerCtor"],"mappings":"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"}